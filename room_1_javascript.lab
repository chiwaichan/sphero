var debuggingMode = true;
var isBeastMode = true;


var _colors = [{"r":255,"g":255,"b":255}];

async function startProgram() {
	listenForColorSensor(_colors);

	await enterMode();
	await calibrateCompass();
	await delay(2);
	await move(1, 16);
	playMatrixAnimation(0, true);
	exitProgram();
}

async function callCalavry(stopRobot) {
	if (stopRobot) {
		stopRoll();
	}
	startIRBroadcast(0, 1);
	await delay(5);
	exitProgram();
}

async function debugInfo(message) {
	if (debuggingMode) {
		await speak(message, true);
	}
	if (true) {
	} else {
	}
	exitProgram();
}

async function enterMode() {
	isBeastMode = true;
	await speak('Beast Mode', false);
	clearMatrix();
	overrideMatrixAnimationFramerate(25);
	await scrollMatrixText('Beast Mode', { r: 255, g: 87, b: 81 }, 20, false);
	await delay(2);
	await Sound.Animal.Turkey.play(false);
	await delay(1);
	clearMatrix();
	setMatrixCharacter('^', { r: 10, g: 16, b: 255 });
	await delay(5);
	exitProgram();
}

async function move(heading, duration) {
	setSpeed(116);
	await roll(0, 239, 22);
	exitProgram();
}

async function onColor(color) {
	if (color.r !== 255 || color.g !== 255 || color.b !== 255) return;
}
registerEvent(EventType.onColor, onColor);

registerMatrixAnimation({
	frames: [[[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 1, 2, 1, 1, 1, 1, 2], [1, 2, 2, 2, 1, 1, 2, 2], [1, 1, 2, 2, 2, 2, 2, 2], [1, 1, 1, 2, 2, 2, 2, 1], [1, 1, 1, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 2, 2], [1, 2, 2, 2, 1, 1, 2, 2], [1, 1, 2, 1, 1, 1, 1, 2]], [[1, 1, 1, 2, 1, 1, 1, 1], [1, 1, 2, 2, 2, 1, 1, 2], [1, 1, 1, 2, 2, 2, 2, 2], [1, 1, 1, 1, 2, 2, 2, 2], [1, 1, 1, 1, 2, 2, 2, 2], [1, 1, 1, 2, 2, 2, 2, 2], [1, 1, 2, 2, 2, 1, 1, 2], [1, 1, 1, 2, 1, 1, 1, 1]], [[1, 1, 2, 1, 1, 1, 1, 2], [1, 2, 2, 2, 1, 1, 2, 2], [1, 1, 2, 2, 2, 2, 2, 2], [1, 1, 1, 2, 2, 2, 2, 1], [1, 1, 1, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 2, 2], [1, 2, 2, 2, 1, 1, 2, 2], [1, 1, 2, 1, 1, 1, 1, 2]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[2, 1, 1, 1, 1, 2, 1, 1], [2, 2, 1, 1, 2, 2, 2, 1], [2, 2, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 1, 1, 1], [1, 2, 2, 2, 2, 1, 1, 1], [2, 2, 2, 2, 2, 2, 1, 1], [2, 2, 1, 1, 2, 2, 2, 1], [2, 1, 1, 1, 1, 2, 1, 1]], [[1, 1, 1, 1, 2, 1, 1, 1], [2, 1, 1, 2, 2, 2, 1, 1], [2, 2, 2, 2, 2, 1, 1, 1], [2, 2, 2, 2, 1, 1, 1, 1], [2, 2, 2, 2, 1, 1, 1, 1], [2, 2, 2, 2, 2, 1, 1, 1], [2, 1, 1, 2, 2, 2, 1, 1], [1, 1, 1, 1, 2, 1, 1, 1]], [[2, 1, 1, 1, 1, 2, 1, 1], [2, 2, 1, 1, 2, 2, 2, 1], [2, 2, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 1, 1, 1], [1, 2, 2, 2, 2, 1, 1, 1], [2, 2, 2, 2, 2, 2, 1, 1], [2, 2, 1, 1, 2, 2, 2, 1], [2, 1, 1, 1, 1, 2, 1, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 1, 2, 1, 1, 1, 1, 2], [1, 2, 2, 2, 1, 1, 2, 2], [1, 1, 2, 2, 2, 2, 2, 2], [1, 1, 1, 2, 2, 2, 2, 1], [1, 1, 1, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 2, 2], [1, 2, 2, 2, 1, 1, 2, 2], [1, 1, 2, 1, 1, 1, 1, 2]], [[1, 1, 1, 2, 1, 1, 1, 1], [1, 1, 2, 2, 2, 1, 1, 2], [1, 1, 1, 2, 2, 2, 2, 2], [1, 1, 1, 1, 2, 2, 2, 2], [1, 1, 1, 1, 2, 2, 2, 2], [1, 1, 1, 2, 2, 2, 2, 2], [1, 1, 2, 2, 2, 1, 1, 2], [1, 1, 1, 2, 1, 1, 1, 1]], [[1, 1, 2, 1, 1, 1, 1, 2], [1, 2, 2, 2, 1, 1, 2, 2], [1, 1, 2, 2, 2, 2, 2, 2], [1, 1, 1, 2, 2, 2, 2, 1], [1, 1, 1, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 2, 2], [1, 2, 2, 2, 1, 1, 2, 2], [1, 1, 2, 1, 1, 1, 1, 2]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[2, 1, 1, 1, 1, 2, 1, 1], [2, 2, 1, 1, 2, 2, 2, 1], [2, 2, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 1, 1, 1], [1, 2, 2, 2, 2, 1, 1, 1], [2, 2, 2, 2, 2, 2, 1, 1], [2, 2, 1, 1, 2, 2, 2, 1], [2, 1, 1, 1, 1, 2, 1, 1]], [[1, 1, 1, 1, 2, 1, 1, 1], [2, 1, 1, 2, 2, 2, 1, 1], [2, 2, 2, 2, 2, 1, 1, 1], [2, 2, 2, 2, 1, 1, 1, 1], [2, 2, 2, 2, 1, 1, 1, 1], [2, 2, 2, 2, 2, 1, 1, 1], [2, 1, 1, 2, 2, 2, 1, 1], [1, 1, 1, 1, 2, 1, 1, 1]], [[2, 1, 1, 1, 1, 2, 1, 1], [2, 2, 1, 1, 2, 2, 2, 1], [2, 2, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 1, 1, 1], [1, 2, 2, 2, 2, 1, 1, 1], [2, 2, 2, 2, 2, 2, 1, 1], [2, 2, 1, 1, 2, 2, 2, 1], [2, 1, 1, 1, 1, 2, 1, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 1, 2, 1, 1], [1, 1, 2, 1, 2, 2, 1, 1], [1, 2, 2, 2, 1, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 2, 1, 1, 1, 1, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 1, 2, 2, 2, 1, 1], [1, 1, 2, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 2, 1, 1], [1, 2, 2, 2, 1, 2, 2, 1], [2, 2, 2, 1, 1, 2, 1, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [2, 1, 2, 1, 1, 2, 2, 2], [1, 2, 1, 2, 2, 2, 1, 1], [1, 1, 2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1, 1, 1], [1, 2, 2, 2, 1, 2, 2, 1], [2, 1, 1, 1, 1, 2, 1, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [2, 1, 2, 1, 1, 2, 1, 2], [1, 2, 1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 2, 1, 2, 1, 1, 1, 1], [2, 1, 1, 1, 1, 2, 1, 2], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 2, 1, 2], [1, 2, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 2, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 2, 1, 1, 1, 1, 2, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 5, 5, 1, 1, 1], [1, 1, 1, 5, 5, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 5, 5, 1, 1, 1], [1, 1, 5, 2, 2, 5, 1, 1], [1, 1, 5, 2, 2, 5, 1, 1], [1, 1, 1, 5, 5, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 5, 1, 1, 5, 1, 1], [1, 5, 2, 2, 2, 2, 5, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 5, 2, 2, 2, 2, 5, 1], [1, 1, 5, 1, 1, 5, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1]], [[1, 5, 1, 1, 1, 1, 5, 1], [5, 2, 2, 1, 1, 2, 2, 5], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [5, 2, 2, 1, 1, 2, 2, 5], [1, 5, 1, 1, 1, 1, 5, 1]], [[5, 2, 1, 1, 1, 1, 2, 5], [2, 2, 2, 1, 1, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 1, 1, 2, 2, 2], [5, 2, 1, 1, 1, 1, 2, 5]]],
	palette: [{ r: 255, g: 255, b: 255 }, { r: 0, g: 0, b: 0 }, { r: 255, g: 0, b: 0 }, { r: 166, g: 42, b: 0 }, { r: 51, g: 3, b: 1 }, { r: 255, g: 191, b: 0 }, { r: 255, g: 255, b: 0 }, { r: 185, g: 246, b: 30 }, { r: 0, g: 255, b: 0 }, { r: 185, g: 255, b: 255 }, { r: 0, g: 255, b: 255 }, { r: 0, g: 0, b: 255 }, { r: 145, g: 0, b: 211 }, { r: 157, g: 48, b: 118 }, { r: 255, g: 0, b: 255 }, { r: 204, g: 27, b: 126 }],
	fps: 18,
	transition: MatrixAnimationTransition.None
});




